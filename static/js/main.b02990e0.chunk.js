(this["webpackJsonpalt-test-proj"]=this["webpackJsonpalt-test-proj"]||[]).push([[0],{75:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(0),s=n.n(r),o=n(25),c=n.n(o),i=n(16),l=n(17),u=n(19),p=n(18),d=n(13),j=n(28),h=n.n(j),b=n(35),O=function(e){return{type:"LOGIN",payload:e}},g=function(e){return{type:"SHOW_ALERT",payload:e}},f=n(24),x=n(8),m=n(10),w=n(89),v=Object(m.a)({header:{marginBottom:25},title:{textAlign:"center"},logoutBtn:{visibility:function(e){return e.auth?"visible ":"hidden "}},navbar:{display:"flex",justifyContent:"space-around",fontSize:24,"& > :nth-child(2n)":{margin:"0 30px"}},link:{textDecoration:"none"},active:{fontWeight:700}})((function(e){var t=e.auth,n=e.logout,r=e.classes;return Object(a.jsxs)("header",{className:r.header,children:[Object(a.jsx)(w.a,{variant:"contained",onClick:n,className:r.logoutBtn,children:"Loguot"}),Object(a.jsx)("h1",{className:r.title,children:"My application"}),Object(a.jsxs)("nav",{className:r.navbar,children:[Object(a.jsx)(f.c,{exact:!0,to:"/",className:r.link,activeClassName:r.active,children:"Home"}),Object(a.jsx)(f.c,{to:"/news",className:r.link,activeClassName:r.active,children:"News"}),t?Object(a.jsx)(f.c,{to:"/profile",className:r.link,activeClassName:r.active,children:"Profile"}):Object(a.jsx)(f.c,{to:"/signin",className:r.link,activeClassName:r.active,children:Object(a.jsx)(w.a,{variant:"contained",children:"Sign In"})})]})]})})),y=function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).doLogout=function(){window.localStorage.removeItem("user"),e.props.logout()},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)(v,{auth:this.props.auth,logout:this.doLogout})}}]),n}(r.Component),N=Object(d.b)((function(e){return{auth:e.auth.auth}}),{logout:function(){return{type:"LOGOUT"}}})(y),A=function(){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h3",{children:"About the app"}),Object(a.jsx)("p",{children:"This application is a SPA that has the following pages:"}),Object(a.jsxs)("ul",{children:[Object(a.jsx)("li",{children:"\u201c/ \u201d - the main page, which contains information about the application."}),Object(a.jsx)("li",{children:"\u201c/news\u201d - a page with news, which are loaded from the jasonplaceholder. Pagination works."}),Object(a.jsx)("li",{children:"\u201c/login\u201d - a page on which you can log in to the system to access the page that is closed from unauthorized users (use fake data: login: Admin, password: 12345). If an authorized user tries to visit this pages, a redirect to the profile page will work."}),Object(a.jsx)("li",{children:"\u201c/profile\u201d - a page that closed from unauthorized users. App will redirect the user to homepage if an unauthorized user tries to enter to this page."})]}),Object(a.jsx)("br",{}),"The correctness of the username and password on the login page is checked.",Object(a.jsx)("br",{}),"All information about user is stored in localStorage.",Object(a.jsx)("br",{}),Object(a.jsx)("p",{children:"Stack: react, react-router, redux, redux-thunk, react hooks, jss."})]})},S=n(31),C=n(7),k=n(30),P={wrapper:{width:"100%"},form:{display:"flex",flexFlow:"column",margin:"0 auto",justifyContent:"center",width:400},title:{fontWeight:700,textAlign:"center"},input:{margin:"10px 0",padding:5,border:"2px solid #ccc",borderRadius:2},link:{display:"block",margin:"0 auto",textAlign:"center",textDecoration:"none",color:"grey"}},T=Object(m.a)(P)((function(e){var t=e.login,n=e.showAlert,s=e.hideAlert,o=e.classes,c=Object(r.useState)({login:"",password:""}),i=Object(k.a)(c,2),l=i[0],u=i[1],p=function(e){u(Object(C.a)(Object(C.a)({},l),{},Object(S.a)({},e.target.name,e.target.value)))};return Object(a.jsxs)("section",{className:o.wrapper,children:[Object(a.jsxs)("form",{className:o.form,onSubmit:function(e){var a;e.preventDefault();var r=null!==(a=JSON.parse(localStorage.getItem("users")))&&void 0!==a?a:{};r[l.login]&&r[l.login].password===l.password?(localStorage.setItem("user",JSON.stringify(l)),t(l.login)):(n("Wrong username or password"),setTimeout((function(){return s()}),2e3))},children:[Object(a.jsx)("h4",{className:o.title,children:"Please Login"}),Object(a.jsx)("input",{type:"text",name:"login",value:l.login,onChange:p,className:o.input,placeholder:"Login",required:!0}),Object(a.jsx)("input",{type:"password",name:"password",value:l.password,onChange:p,className:o.input,placeholder:"Password",required:!0}),Object(a.jsx)("input",{value:"Log in",type:"submit",className:o.input})]}),Object(a.jsx)(f.b,{to:"/signup",className:o.link,children:"Sign up"})]})})),E=function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)(T,{login:this.props.login,showAlert:this.props.showAlert,hideAlert:this.props.hideAlert})}}]),n}(r.Component),I=Object(d.b)(null,(function(e){return{login:function(t){return e(O(t))},showAlert:function(t){return e(g(t))},hideAlert:function(){return e({type:"HIDE_ALERT",payload:""})}}}))(E);var L=Object(m.a)(P)((function(e){var t=e.login,n=e.showAlert,s=e.hideAlert,o=e.classes,c=Object(r.useState)({login:"",password:"",confirmPassword:""}),i=Object(k.a)(c,2),l=i[0],u=i[1],p=function(e){u(Object(C.a)(Object(C.a)({},l),{},Object(S.a)({},e.target.name,e.target.value)))};return Object(a.jsx)("div",{className:o.wrapper,children:Object(a.jsxs)("form",{className:o.form,onSubmit:function(e){e.preventDefault();var a=JSON.parse(localStorage.getItem("users"))||{},r=Object.keys(a);l.password!==l.confirmPassword?(n("Your password and confirmation password do not match"),setTimeout((function(){return s()}),2e3)):r.some((function(e){return e===l.login}))?(n("Username is already taken"),setTimeout((function(){return s()}),2e3)):(a[l.login]=l,localStorage.setItem("users",JSON.stringify(a)),localStorage.setItem("user",JSON.stringify(l)),t(l.login))},children:[Object(a.jsx)("h4",{className:o.title,children:"Please enter your info for registration"}),Object(a.jsx)("input",{type:"text",name:"login",value:l.login,onChange:p,className:o.input,placeholder:"Login",required:!0}),Object(a.jsx)("input",{type:"password",name:"password",value:l.password,onChange:p,className:o.input,placeholder:"Password",required:!0}),Object(a.jsx)("input",{type:"password",name:"confirmPassword",value:l.confirmPassword,onChange:p,className:o.input,placeholder:"Confirm Password",required:!0}),Object(a.jsx)("input",{value:"Sign up",type:"submit",className:o.input})]})})})),R=function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)(L,{login:this.props.login,showAlert:this.props.showAlert,hideAlert:this.props.hideAlert})}}]),n}(r.Component),_=Object(d.b)(null,(function(e){return{login:function(t){return e(O(t))},showAlert:function(t){return e(g(t))},hideAlert:function(){return e({type:"HIDE_ALERT",payload:""})}}}))(R),D=n(59),B=n(88),W=Object(m.a)({post:{margin:"20px 10px",padding:30,border:"2px solid #dadada",transition:"background-color .4s","&:hover":{backgroundColor:"#dadada",transition:"background-color .4s"}},title:{fontWeight:700},author:{color:"#5e5e5e"}})((function(e){var t=e.title,n=e.body,r=e.userId,s=e.classes;return Object(a.jsxs)("div",{className:s.post,children:[Object(a.jsx)("div",{className:s.title,children:t}),Object(a.jsxs)("small",{className:s.author,children:["Author:\xa0",r]}),Object(a.jsx)("div",{children:n})]})})),H=10,J=Object(m.a)({table:{width:"100%"},row:{width:"100%"},leftCell:{textAlign:"right",width:"45%"},centralCell:{width:"10%",textAlign:"center"},rightCell:{width:"45%"},btn:{margin:"0px 10px"},spiner:{marginTop:20,display:"flex",justifyContent:"center"},newsList:{display:"grid",gridTemplateColumns:"1fr 1fr",gridColumnGap:10,gridRowGap:10},"@media screen and (max-width: 600px)":{newsList:{gridTemplateColumns:"1fr"}}})((function(e){var t=e.classes,n=Object(D.a)(e,["classes"]),r=Object(a.jsx)("table",{className:t.table,children:Object(a.jsx)("tbody",{children:Object(a.jsxs)("tr",{className:t.row,children:[Object(a.jsx)("td",{className:t.leftCell,children:n.page?Object(a.jsx)(w.a,{variant:"outlined",className:t.btn,onClick:n.prevPage,disabled:n.loader,children:"Prev"}):null}),Object(a.jsx)("td",{className:t.centralCell,children:Object(a.jsxs)("span",{children:["Page:\xa0",Object(a.jsx)("span",{children:n.page?n.page/H+1:n.page+1})]})}),Object(a.jsx)("td",{className:t.rightCell,children:n.page/H===9?null:Object(a.jsx)(w.a,{variant:"outlined",className:t.btn,onClick:n.nextPage,disabled:n.loader,children:"Next"})})]})})});return Object(a.jsxs)("section",{children:[r,n.loader?Object(a.jsx)("div",{className:t.spiner,children:Object(a.jsx)(B.a,{})}):Object(a.jsx)("div",{className:t.newsList,children:n.news.map((function(e){return Object(a.jsx)(W,{title:e.title,body:e.body,userId:e.userId},e.id)}))})]})})),G=function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).nextPage=Object(b.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.nextPage();case 2:e.props.fetchNews(e.props.page);case 3:case"end":return t.stop()}}),t)}))),e.prevPage=Object(b.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.prevPage();case 2:e.props.fetchNews(e.props.page);case 3:case"end":return t.stop()}}),t)}))),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.fetchNews(this.props.page)}},{key:"render",value:function(){return Object(a.jsx)(J,{news:this.props.news,page:this.props.page,loader:this.props.loader,nextPage:this.nextPage,prevPage:this.prevPage})}}]),n}(r.Component),F={fetchNews:function(e){return function(){var t=Object(b.a)(h.a.mark((function t(n){var a,r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:"SWITCH_LOADER"}),t.next=3,fetch("https://jsonplaceholder.typicode.com/posts?_start=".concat(e,"&_limit=10"));case 3:return a=t.sent,t.next=6,a.json();case 6:r=t.sent,n({type:"FETCH_NEWS",payload:r}),n({type:"SWITCH_LOADER"});case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},nextPage:function(){return{type:"NEXT_PAGE"}},prevPage:function(){return{type:"PREV_PAGE"}}},z=Object(d.b)((function(e){return{news:e.news.news,page:e.news.page,loader:e.news.loader}}),F)(G),q=n(52);var M=Object(m.a)({form:{width:"100%",display:"flex",margin:"20px 0"},field:{fontSize:"16px",flexGrow:1,marginRight:"10px",padding:"5px 10px",outlineStyle:"none",border:"none",borderBottom:"2px solid rgb(228, 228, 228)",borderRadius:"2px"},".addBtn, .crossBtn":{border:"none",borderRadius:"4px",cursor:"pointer"},".addBtn:hover, .crossBtn:hover":{backgroundColor:"rgb(212, 211, 211)"},post:{display:"flex",justifyContent:"space-between",border:"1px solid #ccc",margin:"10px 0",padding:"4px",backgroundColor:"#fffafa",borderRadius:"2px"}})((function(e){var t=e.user,n=e.classes,s=Object(r.useState)(""),o=Object(k.a)(s,2),c=o[0],i=o[1],l=Object(r.useState)([]),u=Object(k.a)(l,2),p=u[0],d=u[1];return Object(r.useEffect)((function(){JSON.parse(localStorage.getItem("posts"))||localStorage.setItem("posts","{}");var e=JSON.parse(localStorage.getItem("posts"))[t];e&&d(e)}),[t]),Object(r.useEffect)((function(){var e=JSON.parse(window.localStorage.getItem("posts"));e[t]=Object(q.a)(p),window.localStorage.setItem("posts",JSON.stringify(e))}),[p,t]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("form",{className:n.form,onSubmit:function(e){e.preventDefault();var t={text:c,date:Date.now(),completed:!1};d([].concat(Object(q.a)(p),[t])),i("")},children:[Object(a.jsx)("input",{type:"text",value:c,name:"post1",placeholder:"Enter your post",autoComplete:"off",className:n.field,onChange:function(e){i(e.target.value)}}),Object(a.jsx)("input",{type:"submit",className:n.addBtn,value:"Add"})]}),p.map((function(e){return Object(a.jsxs)("div",{className:n.post,children:[Object(a.jsx)("div",{children:e.text}),Object(a.jsx)("button",{className:n.crossBtn,onClick:function(){return t=e,void d(p.filter((function(e){return e.date!==t.date})));var t},children:"\xd7"})]},e.date)}))]})})),U=function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)("div",{children:Object(a.jsx)(M,{user:this.props.user})})}}]),n}(r.Component),V=Object(d.b)((function(e){return{user:e.auth.user}}),null)(U),X=Object(m.a)({alert:{position:"absolute",bottom:"2vh",left:"1vw",minWidth:300,width:"fit-content",height:50,backgroundColor:"rgb(243, 226, 128)",fontWeight:700,fontSize:14,display:"flex",alignItems:"center",borderRadius:5},closeButton:{position:"absolute",top:5,right:5,padding:"3px 5px",border:"none",borderRadius:5,backgroundColor:"rgba(255, 255, 255, 0.1)",outlineStyle:"none","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.3)"}},text:{margin:"0 25px 0 10px"}})((function(e){var t=e.text,n=e.closeFunc,r=e.classes;return Object(a.jsxs)("div",{className:r.alert,children:[Object(a.jsx)("span",{className:r.text,children:t}),Object(a.jsx)("button",{onClick:n,className:r.closeButton,children:"\xd7"})]})}));var Y=Object(m.a)({app:{"max-width":"1200px",margin:"0 auto",fontFamily:'"Roboto", sans-serif'}})((function(e){var t=e.auth,n=e.alert,r=e.alertText,s=e.hideAlert,o=e.classes;return Object(a.jsx)("div",{className:o.app,children:Object(a.jsxs)(f.a,{children:[Object(a.jsx)(N,{}),Object(a.jsxs)(x.d,{children:[Object(a.jsx)(x.b,{exact:!0,path:"/",children:Object(a.jsx)(A,{})}),Object(a.jsx)(x.b,{path:"/news",children:Object(a.jsx)(z,{})}),Object(a.jsx)(x.b,{path:"/profile",children:t?Object(a.jsx)(V,{}):Object(a.jsx)(x.a,{to:"/"})}),Object(a.jsx)(x.b,{path:"/signin",children:t?Object(a.jsx)(x.a,{to:"/profile"}):Object(a.jsx)(I,{})}),Object(a.jsx)(x.b,{path:"/signup",children:t?Object(a.jsx)(x.a,{to:"/"}):Object(a.jsx)(_,{})})]}),n&&Object(a.jsx)(X,{text:r,closeFunc:function(){return s()}})]})})})),K=function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){window.localStorage.getItem("user")&&this.props.login(JSON.parse(window.localStorage.getItem("user")).login)}},{key:"render",value:function(){return Object(a.jsx)(Y,{auth:this.props.auth,alert:this.props.alert,alertText:this.props.alertText,hideAlert:this.props.hideAlert})}}]),n}(r.Component),Q=Object(d.b)((function(e){return{auth:e.auth.auth,alert:e.alert.showAlert,alertText:e.alert.alertText}}),(function(e){return{login:function(t){return e(O(t))},hideAlert:function(){return e({type:"HIDE_ALERT",payload:""})}}}))(K),Z=n(27),$="FETCH_NEWS",ee="LOGIN",te="LOGOUT",ne="SWITCH_LOADER",ae="NEXT_PAGE",re="PREV_PAGE",se="SHOW_ALERT",oe="HIDE_ALERT",ce={showAlert:!1,alertText:""},ie={auth:!1,user:""},le={news:[],page:0,loader:!1},ue=Object(Z.c)({news:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case $:return Object(C.a)(Object(C.a)({},e),{},{news:t.payload});case ae:return Object(C.a)(Object(C.a)({},e),{},{page:e.page+H});case re:return Object(C.a)(Object(C.a)({},e),{},{page:e.page-H});case ne:return Object(C.a)(Object(C.a)({},e),{},{loader:!e.loader});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ee:return Object(C.a)(Object(C.a)({},e),{},{auth:!0,user:t.payload});case te:return Object(C.a)(Object(C.a)({},e),{},{auth:!1,user:""});default:return e}},alert:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case se:return Object(C.a)(Object(C.a)({},e),{},{showAlert:!0,alertText:t.payload});case oe:return Object(C.a)(Object(C.a)({},e),{},{showAlert:!1,alertText:""});default:return e}}}),pe=n(58),de=Object(Z.e)(ue,Object(Z.d)(Object(Z.a)(pe.a)));c.a.render(Object(a.jsx)(d.a,{store:de,children:Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsx)(Q,{})})}),document.getElementById("root"))}},[[75,1,2]]]);
//# sourceMappingURL=main.b02990e0.chunk.js.map